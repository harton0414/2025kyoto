<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æˆ‘çš„æ—…éŠæ‰‹æœ­ Demo</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vue-router@4/dist/vue-router.global.js"></script>
    <style>
        /* CSS æ¨£å¼ - ç°¡å–®çš„æ‰‹æ©Ÿé¢¨æ ¼ */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
            color: #333;
        }
        header {
            background-color: #007bff;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 1.2rem;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        .container {
            padding: 15px;
        }
        /* å¡ç‰‡æ¨£å¼ */
        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 15px;
            padding: 15px;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .card:active {
            transform: scale(0.98);
        }
        .card h3 {
            margin: 0 0 10px;
            color: #007bff;
        }
        .card p {
            margin: 5px 0;
            color: #666;
        }
        /* è¡Œç¨‹è¡¨æ¨£å¼ */
        .itinerary-day {
            margin-bottom: 20px;
        }
        .itinerary-day h4 {
            margin-bottom: 10px;
            padding-left: 10px;
            border-left: 4px solid #007bff;
        }
        .activity-item {
            display: flex;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        .activity-time {
            font-weight: bold;
            margin-right: 15px;
            color: #007bff;
            min-width: 50px;
        }
        .activity-info {
            flex-grow: 1;
        }
        .activity-type {
            font-size: 0.8rem;
            color: #999;
            text-transform: uppercase;
            margin-bottom: 2px;
        }
        /* è©³æƒ…é æ¨£å¼ */
        .detail-page img {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .map-link {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #28a745;
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 5px;
            margin-top: 20px;
        }
        .back-btn {
            display: inline-block;
            margin-bottom: 15px;
            color: #007bff;
            text-decoration: none;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="app">
        <header>
            {{ headerTitle }}
        </header>
        <div class="container">
            <router-view></router-view>
        </div>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;
        const { createRouter, createWebHashHistory, useRoute, useRouter } = VueRouter;

        // --- æ¨¡æ“¬è³‡æ–™ (Static Data) ---
        const mockData = {
            trips: [
                { id: 1, title: 'ğŸ‡¯ğŸ‡µ æ±äº¬äº”æ—¥éŠ', dates: '2023/10/20 - 2023/10/24', description: 'è³æ¥“ã€ç¾é£Ÿã€è³¼ç‰©ä¹‹æ—…' }
            ],
            itineraries: {
                1: [ // Trip ID 1 çš„è¡Œç¨‹
                    {
                        day: 'Day 1: 10/20 (äº”)',
                        activities: [
                            { id: 101, time: '14:00', type: 'æ™¯é»', title: 'æ·ºè‰å¯º é›·é–€', locationId: 'loc_sensoji' },
                            { id: 102, time: '16:00', type: 'æ™¯é»', title: 'æ™´ç©ºå¡”', locationId: 'loc_skytree' },
                            { id: 103, time: '19:00', type: 'ç¾é£Ÿ', title: 'ä¸€è˜­æ‹‰éºµ æ·ºè‰åº—', locationId: 'loc_ichiran' }
                        ]
                    },
                    {
                        day: 'Day 2: 10/21 (å…­)',
                        activities: [
                            { id: 201, time: '10:00', type: 'æ™¯é»', title: 'æ˜æ²»ç¥å®®', locationId: 'loc_meiji' },
                            { id: 202, time: '12:30', type: 'ç¾é£Ÿ', title: 'AFURI æŸšå­é¹½æ‹‰éºµ', locationId: 'loc_afuri' },
                            { id: 203, time: '14:30', type: 'æ™¯é»', title: 'æ¾€è°·åå­—è·¯å£ & Sky', locationId: 'loc_shibuya' }
                        ]
                    }
                ]
            },
            locations: {
                'loc_sensoji': {
                    title: 'æ·ºè‰å¯º é›·é–€',
                    description: 'æ±äº¬éƒ½å…§æœ€å¤è€çš„å¯ºå»Ÿï¼Œå·¨å¤§çš„ç´…ç‡ˆç± æ˜¯å…¶æ¨™èªŒã€‚å‘¨é‚Šçš„ä»²è¦‹ä¸–é€šæœ‰è¨±å¤šå‚³çµ±å°åƒå’Œç´€å¿µå“ã€‚',
                    address: 'æ±äº¬éƒ½å°æ±å€æ·ºè‰2ä¸ç›®3-1',
                    googleMapLink: 'https://goo.gl/maps/Mk8h8Y7G7k52',
                    image: 'https://i.imgur.com/3zF7x7q.jpg' // æ›¿æ›æˆå¯¦éš›åœ–ç‰‡é€£çµ
                },
                'loc_skytree': {
                    title: 'æ±äº¬æ™´ç©ºå¡”',
                    description: 'ä¸–ç•Œæœ€é«˜çš„è‡ªç«‹å¼é›»æ³¢å¡”ï¼Œå¯ä»¥ä¿¯ç°æ•´å€‹æ±äº¬å¸‚å€çš„æ™¯è‰²ã€‚æ¨“ä¸‹æœ‰å¤§å‹è³¼ç‰©ä¸­å¿ƒã€‚',
                    address: 'æ±äº¬éƒ½å¢¨ç”°å€æŠ¼ä¸Š1ä¸ç›®1-2',
                    googleMapLink: 'https://goo.gl/maps/8ZqQx5yP5z52',
                    image: 'https://i.imgur.com/4gH9x9r.jpg'
                },
                'loc_ichiran': {
                    title: 'ä¸€è˜­æ‹‰éºµ æ·ºè‰åº—',
                    description: 'çŸ¥åçš„è±šéª¨æ‹‰éºµé€£é–åº—ï¼Œç‰¹è‰²æ˜¯å€‹äººéš”é–“åº§ä½å’Œå¯å®¢è£½åŒ–çš„å£å‘³æ¿ƒæ·¡ã€‚',
                    address: 'æ±äº¬éƒ½å°æ±å€æ·ºè‰1ä¸ç›®1-16',
                    googleMapLink: 'https://goo.gl/maps/1aB2c3d4e5f6',
                    image: 'https://i.imgur.com/5iJ0k1l.jpg'
                }
                // ... å…¶ä»–åœ°é»è³‡æ–™å¯ä¾æ­¤é¡æ¨å¢åŠ 
            }
        };

        // --- çµ„ä»¶å®šç¾© (Components) ---

        // 1. é¦–é  - è¡Œç¨‹åˆ—è¡¨çµ„ä»¶
        const TripList = {
            template: `
                <div>
                    <div v-for="trip in trips" :key="trip.id" class="card" @click="goToItinerary(trip.id)">
                        <h3>{{ trip.title }}</h3>
                        <p>ğŸ“… {{ trip.dates }}</p>
                        <p>â„¹ï¸ {{ trip.description }}</p>
                    </div>
                </div>
            `,
            setup() {
                const router = useRouter();
                const trips = ref(mockData.trips);
                const goToItinerary = (id) => router.push(`/itinerary/${id}`);
                return { trips, goToItinerary };
            }
        };

        // 2. è¡Œç¨‹è©³æƒ…çµ„ä»¶
        const ItineraryDetail = {
            template: `
                <div>
                    <a @click="$router.back()" class="back-btn">â† è¿”å›è¡Œç¨‹åˆ—è¡¨</a>
                    <div v-for="(day, index) in itinerary" :key="index" class="itinerary-day">
                        <h4>{{ day.day }}</h4>
                        <div class="card" style="padding: 0;">
                            <div v-for="act in day.activities" :key="act.id" class="activity-item" @click="goToLocation(act.locationId)">
                                <div class="activity-time">{{ act.time }}</div>
                                <div class="activity-info">
                                    <div class="activity-type">{{ act.type }}</div>
                                    <div>{{ act.title }}</div>
                                </div>
                                <div>Isoka</div>
                            </div>
                        </div>
                    </div>
                </div>
            `,
            setup() {
                const route = useRoute();
                const router = useRouter();
                const tripId = route.params.tripId;
                // æ ¹æ“š URL åƒæ•¸å–å¾—å°æ‡‰çš„è¡Œç¨‹è³‡æ–™
                const itinerary = computed(() => mockData.itineraries[tripId] || []);
                const goToLocation = (locId) => router.push(`/location/${locId}`);
                return { itinerary, goToLocation };
            }
        };

        // 3. æ™¯é»/ç¾é£Ÿè©³æƒ…çµ„ä»¶
        const LocationDetail = {
            template: `
                <div class="detail-page" v-if="location">
                    <a @click="$router.back()" class="back-btn">â† è¿”å›è¡Œç¨‹</a>
                    <h2>{{ location.title }}</h2>
                    <img :src="location.image" alt="location.title" style="background-color: #ddd; min-height: 200px;">
                    <p><strong>ğŸ“ åœ°å€:</strong> {{ location.address }}</p>
                    <p><strong>ğŸ“ ç°¡ä»‹:</strong></p>
                    <p>{{ location.description }}</p>
                    <a :href="location.googleMapLink" target="_blank" class="map-link">ğŸ—ºï¸ åœ¨ Google åœ°åœ–ä¸Šé–‹å•Ÿå°èˆª</a>
                </div>
                <div v-else>
                    <p>æ‰¾ä¸åˆ°æ­¤åœ°é»è³‡è¨Šã€‚</p>
                    <a @click="$router.back()" class="back-btn">â† è¿”å›</a>
                </div>
            `,
            setup() {
                const route = useRoute();
                const locationId = route.params.locationId;
                // æ ¹æ“š URL åƒæ•¸å–å¾—åœ°é»è³‡æ–™
                const location = computed(() => mockData.locations[locationId]);
                return { location };
            }
        };

        // --- è·¯ç”±è¨­å®š (Router Config) ---
        const routes = [
            { path: '/', component: TripList, meta: { title: 'æˆ‘çš„è¡Œç¨‹åˆ—è¡¨' } },
            { path: '/itinerary/:tripId', component: ItineraryDetail, meta: { title: 'è¡Œç¨‹è©³æƒ…' } },
            { path: '/location/:locationId', component: LocationDetail, meta: { title: 'åœ°é»è³‡è¨Š' } }
        ];

        const router = createRouter({
            history: createWebHashHistory(), // ä½¿ç”¨ Hash æ¨¡å¼ï¼Œæ–¹ä¾¿æœ¬åœ°é–‹å•Ÿ
            routes,
        });

        // --- App å¯¦ä¾‹ (App Instance) ---
        const app = createApp({
            setup() {
                const route = useRoute();
                // å‹•æ…‹æ”¹è®Š Header æ¨™é¡Œ
                const headerTitle = computed(() => route.meta.title || 'æ—…éŠæ‰‹æœ­');
                return { headerTitle };
            }
        });

        app.use(router);
        app.mount('#app');
    </script>
</body>
</html>